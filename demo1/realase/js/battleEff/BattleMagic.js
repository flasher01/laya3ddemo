var __extends=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),BattleMagic=function(t){function e(){var e=t.call(this)||this;return e.isPool=!0,e.effPart=Part.create(),e.effPart.on(Laya.Event.COMPLETE,e,e.onRemove),e.addChild(e.effPart),e}return __extends(e,t),e.create=function(t,i,r,a,o,n,s){void 0===o&&(o=500),void 0===n&&(n=500),void 0===s&&(s=0);var f=e.pool.length>0?e.pool.pop():new e;return f.url=t,f.remain=o,f.x=r,f.y=a,f.inverval=n,f.repeat=i,f.act="_1",f.delay=s,f.onAdd(),f.dep=9e3,f},e.prototype.onAdd=function(){this.effPart.act=this.act,this.effPart.setAct(this.act),this.effPart.setVal(this.url),this.effPart.visible=!1,this.runTime=0,this.isAlive=!0},e.prototype.play=function(){Laya.timer.frameLoop(1,this,this.update)},e.prototype.update=function(t){if(t=Laya.timer.delta,this.delay>0)this.delay-=t;else{this.effPart.visible=!0,this.remain-=t,this.remain<=0&&(this.isAlive=!1),this.runTime+=t;var e=(DateUtils.getTimer(),this.effPart),i=this.runTime/this.inverval;e.setPec(i)}},e.prototype.onRemove=function(){this.scaleX=this.scaleY=1,this.alpha=1,this.dep=9e3,this.effPart.reset(),this.effPart.visible=!1,e.pool.push(this),Laya.timer.clear(this,this.update)},e.pool=[],e}(BattleUnit);