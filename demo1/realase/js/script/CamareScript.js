var __extends=this&&this.__extends||function(){var t=function(a,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var e in a)a.hasOwnProperty(e)&&(t[e]=a[e])})(a,e)};return function(a,e){function o(){this.constructor=a}t(a,e),a.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),CameraMoveScript=function(t){function a(){var a=t.call(this)||this;return a.yawPitchRoll=new Laya.Vector3,a.resultRotation=new Laya.Quaternion,a.tempRotationZ=new Laya.Quaternion,a.tempRotationX=new Laya.Quaternion,a.tempRotationY=new Laya.Quaternion,a.rotaionSpeed=6e-5,a}return __extends(a,t),a.prototype._initialize=function(a){t.prototype._initialize.call(this,a),Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.mouseDown),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.mouseUp),Laya.stage.on(Laya.Event.MOUSE_OUT,this,this.mouseOut),this.camera=a},a.prototype._update=function(a){t.prototype._update.call(this,a),this.updateCamera(a.elapsedTime)},a.prototype.mouseDown=function(t){this.camera.transform.localRotation.getYawPitchRoll(this.yawPitchRoll),this.lastMouseX=Laya.stage.mouseX,this.lastMouseY=Laya.stage.mouseY,this.isMouseDown=!0},a.prototype.mouseUp=function(t){this.isMouseDown=!1},a.prototype.mouseOut=function(t){this.isMouseDown=!1},a.prototype.updateCamera=function(t){if(!isNaN(this.lastMouseX)&&!isNaN(this.lastMouseY)){this.owner.scene;if(Laya.KeyBoardManager.hasKeyDown(87)&&this.camera.moveForward(-.002*t),Laya.KeyBoardManager.hasKeyDown(83)&&this.camera.moveForward(.002*t),Laya.KeyBoardManager.hasKeyDown(65)&&this.camera.moveRight(-.002*t),Laya.KeyBoardManager.hasKeyDown(68)&&this.camera.moveRight(.002*t),Laya.KeyBoardManager.hasKeyDown(81)&&this.camera.moveVertical(.002*t),Laya.KeyBoardManager.hasKeyDown(69)&&this.camera.moveVertical(-.002*t),this.isMouseDown){var a=Laya.stage.mouseX-this.lastMouseX,e=Laya.stage.mouseY-this.lastMouseY,o=this.yawPitchRoll.elements;o[0]-=a*this.rotaionSpeed*t,o[1]-=e*this.rotaionSpeed*t,this.updateRotation()}}this.lastMouseX=Laya.stage.mouseX,this.lastMouseY=Laya.stage.mouseY},a.prototype.updateRotation=function(){var t=this.yawPitchRoll.elements;Math.abs(t[1])<1.5&&(Laya.Quaternion.createFromYawPitchRoll(t[0],t[1],t[2],this.tempRotationZ),this.camera.transform.localRotation=this.tempRotationZ)},a}(Laya.Script);