var Camera2D=function(){function t(t,s,e,i,a){void 0===a&&(a=!1);this._stage=t,this._stageContainer=s,this._layersInfo=new Laya.Dictionary,this.focusTarget=e,this._focusPosition=new Laya.Point,this._focusTracker=new Laya.Point,this._focusTracker.x=this._focusTarget.x,this._focusTracker.y=this._focusTarget.y,this._focusCurrentLoc=new Laya.Point(this._focusTracker.x,this._focusTracker.y),this._focusLastLoc=new Laya.Point(this._focusTracker.x,this._focusTracker.y);for(var o=0,r=i;o<r.length;o++){var n=r[o];n.ox=n.instance.x,n.oy=n.instance.y,this._layersInfo[n.name]=n}this._targetLastX=this._targetCurrentX=this.focusTarget.x,this._targetLastY=this._targetCurrentY=this.focusTarget.y,this.trackStep=10,this.swapStep=10,this._step=this.trackStep,this._tempStep=this.trackStep,this.setFocusPosition(.5*this._stage.designWidth,.5*this._stage.designHeight),this.setBoundary(),a?this.start():this.pause()}return Object.defineProperty(t.prototype,"focusTarget",{get:function(){return this._focusTarget},set:function(t){this._focusTarget=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focusDist",{get:function(){return{distX:this._focusCurrentLoc.x-this._focusLastLoc.x,distY:this._focusCurrentLoc.y-this._focusLastLoc.y}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"globalTrackerLoc",{get:function(){var t=new Laya.Point;return this._focusTarget instanceof Laya.Point?t=this._stageContainer.localToGlobal(this._focusTracker,!0):this._focusTarget instanceof Laya.Sprite&&(t=this._focusTarget.parent.localToGlobal(this._focusTracker,!0)),t},enumerable:!0,configurable:!0}),t.prototype.getLayerByName=function(t){return this._layersInfo[t].instance},t.prototype.start=function(){this._switch=!0},t.prototype.pause=function(){this._switch=!1},t.prototype.destroy=function(){this._stage=null,this._stageContainer=null,this._boundaryLayer=null,this._layersInfo=null,this.focusTarget=null},t.prototype.setFocusPosition=function(t,s){this._focusPosition.x=t,this._focusPosition.y=s},t.prototype.setBoundary=function(t){void 0===t&&(t=null),this._boundaryLayer=t},t.prototype.jumpToFocus=function(t){void 0===t&&(t=null);null==t&&(t=this._focusTarget),this._focusCurrentLoc.x=this._focusLastLoc.x=this._focusTracker.x=this._focusTarget.x,this._focusCurrentLoc.y=this._focusLastLoc.y=this._focusTracker.y=this._focusTarget.y,this.swapFocus(t,1)},t.prototype.swapFocus=function(t,s,e,i,a){void 0===s&&(s=10),void 0===e&&(e=!1),void 0===i&&(i=1),void 0===a&&(a=10);this._focusTarget=t,this.swapStep=Math.max(1,s),this._tempStep=this.trackStep,this._step=this.swapStep,this.isSwaping=!0,this.enableCallBack&&this._stage.event(Camera2DEvent.SWAP_STARTED)},t.prototype.update=function(){this._switch&&null!=this._focusTarget&&(this._focusTarget instanceof Laya.Sprite&&null==this._focusTarget.parent||(0==Math.round((this._focusTarget.x-this._focusTracker.x)*(this._focusTarget.y-this._focusTracker.y))?(this._tempStep=this.trackStep,this._step=this._tempStep,this._focusTracker.x=this._focusTarget.x,this._focusTracker.y=this._focusTarget.y,this.isSwaping&&(this.isSwaping=!1,this.enableCallBack&&this._stage.event(Camera2DEvent.SWAP_FINISHED)),this.isFocused=!0):this.isFocused=!1,this._focusTracker.x+=(this._focusTarget.x-this._focusTracker.x)/this._step,this._focusTracker.y+=(this._focusTarget.y-this._focusTracker.y)/this._step,this._focusLastLoc.x=this._focusCurrentLoc.x,this._focusLastLoc.y=this._focusCurrentLoc.y,this._focusCurrentLoc.x=this._focusTracker.x,this._focusCurrentLoc.y=this._focusTracker.y,this._targetLastX=this._targetCurrentX,this._targetLastY=this._targetCurrentY,this._targetCurrentX=this.focusTarget.x,this._targetCurrentY=this.focusTarget.y,this.positionStageContainer(),this.testBounds()))},t.prototype.testBounds=function(){var t={top:!1,bottom:!1,left:!1,right:!1};if(null==this._boundaryLayer)return t;var s=this._boundaryLayer.parent.localToGlobal(new Laya.Point(this._boundaryLayer.x,this._boundaryLayer.y)),e=this._boundaryLayer.parent.localToGlobal(new Laya.Point(this._boundaryLayer.x+this._boundaryLayer.width,this._boundaryLayer.y+this._boundaryLayer.height)),i=s.x,a=s.y,o=e.x,r=e.y;return i>0&&(this.ignoreLeftBound||(this._stageContainer.x+=0-i),this.enableCallBack&&(Camera2DEvent.boundary="left",this._stage.event(Camera2DEvent.boundary)),t.left=!0),o<this._stage.designWidth&&(this.ignoreRightBound||(this._stageContainer.x+=this._stage.designWidth-o),this.enableCallBack&&(Camera2DEvent.boundary="right",this._stage.event(Camera2DEvent.boundary)),t.right=!0),a>0&&(this.ignoreTopBound||(this._stageContainer.y+=0-a),this.enableCallBack&&(Camera2DEvent.boundary="top",this._stage.event(Camera2DEvent.boundary)),t.top=!0),r<this._stage.designHeight&&(this.ignoreBottomBound||(this._stageContainer.y+=this._stage.designHeight-r),this.enableCallBack&&(Camera2DEvent.boundary="bottom",this._stage.event(Camera2DEvent.boundary)),t.bottom=!0),t},t.prototype.positionStageContainer=function(){this._stageContainer.x+=this._focusPosition.x-this.globalTrackerLoc.x,this._stageContainer.y+=this._focusPosition.y-this.globalTrackerLoc.y},t}();